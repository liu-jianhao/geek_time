# 21 | 为什么我只改一行的语句，锁这么多?

加锁规则里面，包含了两个“原则”、两个“优化”和一个“bug”。
1. 原则 1:加锁的基本单位是 next-key lock。希望你还记得，next-key lock 是前开后闭 区间。
2. 原则 2:查找过程中访问到的对象才会加锁。
3. 优化 1:索引上的等值查询，给唯一索引加锁的时候，next-key lock 退化为行锁。
4. 优化 2:索引上的等值查询，向右遍历时且最后一个值不满足等值条件的时候，next-
key lock 退化为间隙锁。
5. 一个 bug:唯一索引上的范围查询会访问到不满足条件的第一个值为止。